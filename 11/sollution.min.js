i=require('fs').readFileSync(0,'utf8');

b=(e,r)=>b[k=r+'.'+e]=b[k]??(--r<0?1:!e?b(1,r):(l=(S=''+e).length)%2?b(e*2024,r):(b[e]=S.slice(l/2),b(+S.slice(0,l/2),r)+b(+b[e],r)))

console.log('part 1', i.split` `.reduce((a,v)=>a+b(+v,25),0));
console.log('part 2', i.split` `.reduce((a,v)=>a+b(+v,75),0));
